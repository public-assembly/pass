{"version":3,"file":"index.js","sources":["../src/components/Marquee.tsx"],"sourcesContent":["import React, {\n  Fragment,\n  useEffect,\n  useState,\n  useRef,\n  useCallback,\n  useMemo,\n  ReactNode,\n  CSSProperties,\n  FC,\n  forwardRef,\n  Children,\n  MutableRefObject,\n  RefAttributes,\n} from \"react\";\nimport \"./Marquee.scss\";\n\ntype MarqueeProps = {\n  /**\n   * @description Inline style for the container div\n   * @type {CSSProperties}\n   * @default {}\n   */\n  style?: CSSProperties;\n  /**\n   * @description Class name to style the container div\n   * @type {string}\n   * @default \"\"\n   */\n  className?: string;\n  /**\n   * @description Whether to automatically fill blank space in the marquee with copies of the children or not\n   * @type {boolean}\n   * @default false\n   */\n  autoFill?: boolean;\n  /**\n   * @description Whether to play or pause the marquee\n   * @type {boolean}\n   * @default true\n   */\n  play?: boolean;\n  /**\n   * @description Whether to pause the marquee when hovered\n   * @type {boolean}\n   * @default false\n   */\n  pauseOnHover?: boolean;\n  /**\n   * @description Whether to pause the marquee when clicked\n   * @type {boolean}\n   * @default false\n   */\n  pauseOnClick?: boolean;\n  /**\n   * @description The direction the marquee is sliding\n   * @type {\"left\" | \"right\" | \"up\" | \"down\"}\n   * @default \"left\"\n   */\n  direction?: \"left\" | \"right\" | \"up\" | \"down\";\n  /**\n   * @description Speed calculated as pixels/second\n   * @type {number}\n   * @default 50\n   */\n  speed?: number;\n  /**\n   * @description Duration to delay the animation after render, in seconds\n   * @type {number}\n   * @default 0\n   */\n  delay?: number;\n  /**\n   * @description The number of times the marquee should loop, 0 is equivalent to infinite\n   * @type {number}\n   * @default 0\n   */\n  loop?: number;\n  /**\n   * @description Whether to show the gradient or not\n   * @type {boolean}\n   * @default false\n   */\n  gradient?: boolean;\n  /**\n   * @description The rgb color of the gradient as an array of length 3\n   * @type {Array<number>} of length 3\n   * @default [255, 255, 255]\n   */\n  gradientColor?: [number, number, number];\n  /**\n   * @description The width of the gradient on either side\n   * @type {number | string}\n   * @default 200\n   */\n  gradientWidth?: number | string;\n  /**\n   * @description A callback for when the marquee finishes scrolling and stops. Only calls if loop is non-zero.\n   * @type {() => void}\n   * @default null\n   */\n  onFinish?: () => void;\n  /**\n   * @description A callback for when the marquee finishes a loop. Does not call if maximum loops are reached (use onFinish instead).\n   * @type {() => void}\n   * @default null\n   */\n  onCycleComplete?: () => void;\n  /**\n   * @description: A callback function that is invoked once the marquee has finished mounting. It can be utilized to recalculate the page size, if necessary.\n   * @type {() => void}\n   * @default null\n   */\n  onMount?: () => void;\n  /**\n   * @description The children rendered inside the marquee\n   * @type {ReactNode}\n   * @default null\n   */\n  children?: ReactNode;\n} & RefAttributes<HTMLDivElement>;\n\nconst Marquee: FC<MarqueeProps> = forwardRef(function Marquee(\n  {\n    style = {},\n    className = \"\",\n    autoFill = false,\n    play = true,\n    pauseOnHover = false,\n    pauseOnClick = false,\n    direction = \"left\",\n    speed = 50,\n    delay = 0,\n    loop = 0,\n    gradient = false,\n    gradientColor = [255, 255, 255],\n    gradientWidth = 200,\n    onFinish,\n    onCycleComplete,\n    onMount,\n    children,\n  },\n  ref\n) {\n  // React Hooks\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [marqueeWidth, setMarqueeWidth] = useState(0);\n  const [multiplier, setMultiplier] = useState(1);\n  const [isMounted, setIsMounted] = useState(false);\n  const rootRef = useRef<HTMLDivElement>(null);\n  const containerRef = (ref as MutableRefObject<HTMLDivElement>) || rootRef;\n  const marqueeRef = useRef<HTMLDivElement>(null);\n\n  // Calculate width of container and marquee and set multiplier\n  const calculateWidth = useCallback(() => {\n    if (marqueeRef.current && containerRef.current) {\n      const containerRect = containerRef.current.getBoundingClientRect();\n      const marqueeRect = marqueeRef.current.getBoundingClientRect();\n      let containerWidth = containerRect.width;\n      let marqueeWidth = marqueeRect.width;\n\n      // Swap width and height if direction is up or down\n      if (direction === \"up\" || direction === \"down\") {\n        containerWidth = containerRect.height;\n        marqueeWidth = marqueeRect.height;\n      }\n\n      if (autoFill && containerWidth && marqueeWidth) {\n        setMultiplier(\n          marqueeWidth < containerWidth\n            ? Math.ceil(containerWidth / marqueeWidth)\n            : 1\n        );\n      } else {\n        setMultiplier(1);\n      }\n\n      setContainerWidth(containerWidth);\n      setMarqueeWidth(marqueeWidth);\n    }\n  }, [autoFill, containerRef, direction]);\n\n  // Calculate width and multiplier on mount and on window resize\n  useEffect(() => {\n    if (!isMounted) return;\n\n    calculateWidth();\n    if (marqueeRef.current && containerRef.current) {\n      const resizeObserver = new ResizeObserver(() => calculateWidth());\n      resizeObserver.observe(containerRef.current);\n      resizeObserver.observe(marqueeRef.current);\n      return () => {\n        if (!resizeObserver) return;\n        resizeObserver.disconnect();\n      };\n    }\n  }, [calculateWidth, containerRef, isMounted]);\n\n  // Recalculate width when children change\n  useEffect(() => {\n    calculateWidth();\n  }, [calculateWidth, children]);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Runs the onMount callback, if it is a function, when Marquee is mounted.\n  useEffect(() => {\n    if (typeof onMount === \"function\") {\n      onMount();\n    }\n  }, []);\n\n  // Animation duration\n  const duration = useMemo(() => {\n    if (autoFill) {\n      return (marqueeWidth * multiplier) / speed;\n    } else {\n      return marqueeWidth < containerWidth\n        ? containerWidth / speed\n        : marqueeWidth / speed;\n    }\n  }, [autoFill, containerWidth, marqueeWidth, multiplier, speed]);\n\n  // Gradient color in an unfinished rgba format\n  const rgbaGradientColor = `rgba(${gradientColor[0]}, ${gradientColor[1]}, ${gradientColor[2]}`;\n\n  const containerStyle = useMemo(\n    () => ({\n      ...style,\n      [\"--pause-on-hover\" as string]:\n        !play || pauseOnHover ? \"paused\" : \"running\",\n      [\"--pause-on-click\" as string]:\n        !play || (pauseOnHover && !pauseOnClick) || pauseOnClick\n          ? \"paused\"\n          : \"running\",\n      [\"--width\" as string]:\n        direction === \"up\" || direction === \"down\" ? `100vh` : \"100%\",\n      [\"--transform\" as string]:\n        direction === \"up\"\n          ? \"rotate(-90deg)\"\n          : direction === \"down\"\n            ? \"rotate(90deg)\"\n            : \"none\",\n    }),\n    [style, play, pauseOnHover, pauseOnClick, direction]\n  );\n\n  const gradientStyle = useMemo(\n    () => ({\n      [\"--gradient-color\" as string]: `${rgbaGradientColor}, 1), ${rgbaGradientColor}, 0)`,\n      [\"--gradient-width\" as string]:\n        typeof gradientWidth === \"number\"\n          ? `${gradientWidth}px`\n          : gradientWidth,\n    }),\n    [rgbaGradientColor, gradientWidth]\n  );\n\n  const marqueeStyle = useMemo(\n    () => ({\n      [\"--play\" as string]: play ? \"running\" : \"paused\",\n      [\"--direction\" as string]: direction === \"left\" ? \"normal\" : \"reverse\",\n      [\"--duration\" as string]: `${duration}s`,\n      [\"--delay\" as string]: `${delay}s`,\n      [\"--iteration-count\" as string]: !!loop ? `${loop}` : \"infinite\",\n      [\"--min-width\" as string]: autoFill ? `auto` : \"100%\",\n    }),\n    [play, direction, duration, delay, loop, autoFill]\n  );\n\n  const childStyle = useMemo(\n    () => ({\n      [\"--transform\" as string]:\n        direction === \"up\"\n          ? \"rotate(90deg)\"\n          : direction === \"down\"\n            ? \"rotate(-90deg)\"\n            : \"none\",\n    }),\n    [direction]\n  );\n\n  // Render {multiplier} number of children\n  const multiplyChildren = useCallback(\n    (multiplier: number) => {\n      return [\n        ...Array(\n          Number.isFinite(multiplier) && multiplier >= 0 ? multiplier : 0\n        ),\n      ].map((_, i) => (\n        <Fragment key={i}>\n          {Children.map(children, (child) => {\n            return (\n              <div style={childStyle} className=\"child\">\n                {child}\n              </div>\n            );\n          })}\n        </Fragment>\n      ));\n    },\n    [childStyle, children]\n  );\n\n  return !isMounted ? null : (\n    <div\n      ref={containerRef}\n      style={containerStyle}\n      className={\"marquee-container \" + className}\n    >\n      {gradient && <div style={gradientStyle} className=\"overlay\" />}\n      <div\n        className=\"marquee\"\n        style={marqueeStyle}\n        onAnimationIteration={onCycleComplete}\n        onAnimationEnd={onFinish}\n      >\n        <div className=\"initial-child-container\" ref={marqueeRef}>\n          {Children.map(children, (child) => {\n            return (\n              <div style={childStyle} className=\"child\">\n                {child}\n              </div>\n            );\n          })}\n        </div>\n        {multiplyChildren(multiplier - 1)}\n      </div>\n      <div className=\"marquee\" style={marqueeStyle}>\n        {multiplyChildren(multiplier)}\n      </div>\n    </div>\n  );\n});\n\nexport default Marquee;\n"],"names":["forwardRef","useState","useRef","useCallback","useEffect","useMemo","React","Fragment","Children"],"mappings":"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"}